<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0e17">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- SEO International Standards -->
    <meta name="description" content="INSIDIOUS BOT - Premium WhatsApp Bot Deployment with instant pairing, session management and enterprise security">
    <meta name="keywords" content="whatsapp bot, baileys, pairing, deployment, premium bot">
    <meta name="author" content="Stanley Assanaly">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Link Preview -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="INSIDIOUS BOT | Premium Deployment">
    <meta property="og:description" content="Deploy your WhatsApp bot instantly with enterprise-grade security">
    <meta property="og:image" content="https://raw.githubusercontent.com/Official123-12/STANYFREEBOT-/refs/heads/main/IMG_1377.jpeg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:url" content="https://insidious-bot.railway.app">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://raw.githubusercontent.com/Official123-12/STANYFREEBOT-/refs/heads/main/IMG_1377.jpeg">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "INSIDIOUS BOT",
        "applicationCategory": "DeveloperApplication",
        "offers": {"@type": "Offer", "price": "0"},
        "author": {"@type": "Person", "name": "Stanley Assanaly"}
    }
    </script>
    
    <!-- Preconnect -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <!-- Fonts & Icons - Font Awesome Only -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <title>INSIDIOUS BOT | Premium Deployment</title>
    
    <style>
        :root {
            --primary: #7c3aed;
            --primary-light: #8b5cf6;
            --primary-dark: #6d28d9;
            --secondary: #ec4899;
            --accent: #06b6d4;
            --dark: #0f172a;
            --darker: #020617;
            --deepest: #010206;
            --card: rgba(22, 33, 62, 0.85);
            --card-hover: rgba(30, 45, 80, 0.9);
            --text: #f8fafc;
            --text-primary: #ffffff;
            --text-muted: #94a3b8;
            --text-dim: #64748b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --border: rgba(148, 163, 184, 0.15);
            --border-glow: rgba(124, 58, 237, 0.4);
            --glow-primary: 0 0 35px rgba(124, 58, 237, 0.5);
            --glass-blur: blur(24px);
            --glass-border: 1px solid rgba(255, 255, 255, 0.1);
            --shadow-lg: 0 25px 80px rgba(0, 0, 0, 0.6);
            --radius-lg: 24px;
            --transition: 250ms cubic-bezier(0.4, 0, 0.2, 1);
        }

        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing: antialiased; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: var(--darker);
            color: var(--text);
            min-height: 100vh;
            min-height: 100dvh;
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
        }

        /* Premium Animated Background – IMAGE WAZI KABISA */
        .bg-premium {
            position: fixed; inset: 0; z-index: -2; overflow: hidden; pointer-events: none;
        }
        .bg-image {
            position: absolute; inset: 0;
            background-image: url('https://raw.githubusercontent.com/Official123-12/STANYFREEBOT-/refs/heads/main/IMG_1378.jpegheads/main/IMG_1377.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            /* BLUR IMEONDOSHWA – picha iko wazi */
        }
        .bg-overlay {
            position: absolute; inset: 0;
            background: radial-gradient(ellipse at 50% 50%, transparent 0%, rgba(2,6,23,0.5) 100%);
        }

        /* Loader – IMAGE SAFI KABISA */
        #loader {
            position: fixed; inset: 0; background: var(--deepest);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 9999; transition: opacity 0.5s ease, visibility 0.5s;
        }
        #loader.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        .loader-logo {
            width: 80px; height: 80px; border-radius: 24px;
            background-image: url('https://raw.githubusercontent.com/Official123-12/STANYFREEBOT-/refs/heads/main/IMG_1378.jpeg');
            background-size: cover;
            background-position: center;
            margin-bottom: 1.5rem;
            /* EFFECTS ZOTE ZIMEONDOSHWA – picha safi */
        }
        .loader-title {
            font-size: 1.5rem; font-weight: 800; letter-spacing: -0.02em;
            background: linear-gradient(135deg, var(--text-primary), var(--primary-light));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .loader-progress {
            width: 220px; height: 5px; background: rgba(148,163,184,0.15);
            border-radius: 10px; overflow: hidden; margin: 1.5rem 0;
        }
        .loader-progress-bar {
            height: 100%; width: 0;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
            border-radius: 10px; animation: loadBar 2.8s cubic-bezier(0.65,0,0.35,1) forwards;
        }
        @keyframes loadBar { 0%{width:0} 25%{width:30%} 50%{width:60%} 75%{width:88%} 100%{width:100%} }
        .loader-status { font-size: 0.85rem; color: var(--text-dim); }

        /* Header */
        .top-header {
            display: flex; align-items: center; justify-content: space-between;
            padding: 1rem 1.5rem; background: var(--card);
            backdrop-filter: var(--glass-blur); border-bottom: var(--glass-border);
            position: sticky; top: 0; z-index: 100; box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        .header-left { display: flex; align-items: center; gap: 1rem; flex: 1; min-width: 0; }
        .header-logo {
            width: 48px; height: 48px; border-radius: 16px;
            background-image: url('https://o.uguu.se/bcWjyRkF.jpg');
            background-size: cover;
            background-position: center;
            flex-shrink: 0;
            cursor: pointer; transition: transform var(--transition);
            border: 1px solid rgba(255,255,255,0.2);
        }
        .header-logo:hover { transform: scale(1.05); }
        .header-title {
            font-weight: 700; font-size: 1rem;
            background: linear-gradient(135deg, var(--text-primary), var(--primary-light));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
        }
        .status-badge {
            display: inline-flex; align-items: center; gap: 0.5rem;
            padding: 0.4rem 0.9rem; background: rgba(16,185,129,0.12);
            border: 1px solid rgba(16,185,129,0.3); border-radius: 20px;
            font-size: 0.8rem; font-weight: 500; color: var(--success);
        }
        .status-dot {
            width: 6px; height: 6px; border-radius: 50%; background: var(--success);
            box-shadow: 0 0 0 3px rgba(16,185,129,0.25); animation: pulseDot 2s infinite;
        }
        @keyframes pulseDot { 0%,100%{transform:scale(1)} 50%{transform:scale(1.3)} }

        /* Navigation */
        .nav-controls {
            display: flex; justify-content: center; gap: 0.4rem;
            padding: 0.6rem 1rem; background: rgba(15,23,42,0.7);
            backdrop-filter: var(--glass-blur); border-bottom: var(--glass-border);
            position: sticky; top: 72px; z-index: 99; overflow-x: auto;
        }
        .nav-controls::-webkit-scrollbar { display: none; }
        .nav-btn {
            display: flex; flex-direction: column; align-items: center; gap: 0.3rem;
            padding: 0.55rem 0.85rem; background: var(--card);
            border: var(--glass-border); border-radius: 14px;
            color: var(--text-muted); text-decoration: none;
            font-size: 0.72rem; font-weight: 500; cursor: pointer;
            transition: all var(--transition); min-width: 70px;
        }
        .nav-btn i { font-size: 1.1rem; }
        .nav-btn:hover { color: var(--text-primary); transform: translateY(-2px); }
        .nav-btn.active {
            color: var(--text-primary);
            background: linear-gradient(135deg, rgba(124,58,237,0.25), rgba(236,72,153,0.2));
            border-color: var(--border-glow); box-shadow: var(--glow-primary);
        }

        /* Main */
        main { max-width: 1000px; margin: 0 auto; padding: 1.5rem 1rem 3rem; }
        .section { display: none; animation: fadeIn 0.4s ease; }
        .section.active { display: block; }
        @keyframes fadeIn { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }

        /* Dashboard */
        #dashboard { text-align: center; padding: 2rem 1rem; }
        .dashboard-title {
            font-size: 1.9rem; font-weight: 800; margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--text-primary), var(--primary-light), var(--secondary));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .dashboard-subtitle { color: var(--text-muted); margin-bottom: 2rem; max-width: 500px; margin-inline: auto; }
        
        .quick-links { display: flex; justify-content: center; gap: 0.6rem; flex-wrap: wrap; margin-bottom: 2rem; }
        .quick-link {
            display: inline-flex; align-items: center; gap: 0.45rem;
            padding: 0.6rem 1.2rem; background: var(--card);
            border: var(--glass-border); border-radius: 14px;
            color: var(--text); text-decoration: none; font-size: 0.85rem;
            transition: all var(--transition);
        }
        .quick-link:hover { transform: translateY(-3px); border-color: var(--border-glow); }
        
        .dash-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px,1fr)); gap: 0.9rem; }
        .dash-card {
            background: var(--card); border: var(--glass-border); border-radius: var(--radius-lg);
            padding: 1.2rem 1rem; text-align: center; cursor: pointer;
            transition: all var(--transition);
        }
        .dash-card:hover { transform: translateY(-4px); box-shadow: var(--glow-primary); border-color: var(--border-glow); }
        .dash-card i { font-size: 1.8rem; margin-bottom: 0.6rem; display: block; }
        .dash-card .label { font-weight: 600; font-size: 0.92rem; }
        .dash-card .desc { font-size: 0.76rem; color: var(--text-muted); }

        /* Card Component */
        .card {
            background: var(--card); border: var(--glass-border); border-radius: var(--radius-lg);
            padding: 1.6rem; backdrop-filter: var(--glass-blur);
            margin-bottom: 1.4rem; box-shadow: var(--shadow-lg);
            position: relative;
        }
        .card::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px;
            background: linear-gradient(90deg, transparent, var(--primary), var(--secondary), transparent);
        }
        .card-header {
            display: flex; align-items: center; justify-content: space-between;
            margin-bottom: 1.3rem; padding-bottom: 1rem; border-bottom: var(--glass-border);
        }
        .card-header h3 { display: flex; align-items: center; gap: 0.7rem; font-size: 1.2rem; font-weight: 700; }
        .card-header h3 i { color: var(--primary-light); }
        
        .back-btn {
            display: inline-flex; align-items: center; gap: 0.4rem;
            padding: 0.45rem 0.9rem; background: var(--card);
            border: var(--glass-border); border-radius: 10px;
            color: var(--text); font-size: 0.83rem; cursor: pointer;
            transition: all var(--transition);
        }
        .back-btn:hover { background: var(--primary); border-color: var(--primary); }

        /* Forms */
        .form-group { margin-bottom: 1.2rem; }
        .form-group label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: var(--text-muted); font-size: 0.9rem; }
        .form-control {
            width: 100%; padding: 0.9rem 1.1rem;
            background: rgba(15,23,42,0.7); border: var(--glass-border);
            border-radius: 12px; color: var(--text-primary); font-size: 1rem;
            transition: all var(--transition); outline: none;
        }
        .form-control:focus { border-color: var(--primary-light); box-shadow: 0 0 0 3px rgba(124,58,237,0.2); }
        .form-hint { display: block; margin-top: 0.35rem; font-size: 0.8rem; color: var(--text-dim); }

        /* Buttons */
        .btn {
            display: inline-flex; align-items: center; justify-content: center; gap: 0.55rem;
            padding: 0.9rem 1.6rem; background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border: none; border-radius: 12px; color: white;
            font-weight: 600; font-size: 0.95rem; cursor: pointer;
            transition: all var(--transition); width: 100%;
        }
        .btn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 10px 35px rgba(124,58,237,0.5); }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
        .btn-success { background: linear-gradient(135deg, var(--success), #059669); }
        .btn-success:hover { box-shadow: 0 10px 35px rgba(16,185,129,0.45); }
        .btn-outline { background: transparent; border: 2px solid var(--primary-light); color: var(--primary-light); }
        .btn-outline:hover { background: var(--primary); color: white; }
        .btn-copy {
            background: linear-gradient(135deg, var(--accent), #0891b2);
            padding: 0.65rem 1.3rem; font-size: 0.88rem; width: auto; margin-top: 0.7rem;
        }
        .btn-copy.copied { background: linear-gradient(135deg, var(--success), #059669); }

        /* Result Box */
        .result-box {
            margin-top: 1.3rem; padding: 1.15rem;
            background: rgba(15,23,42,0.8); border-radius: 12px;
            border-left: 4px solid var(--primary-light); display: none;
        }
        .result-box.show { display: block; animation: slideUp 0.3s ease; }
        @keyframes slideUp { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
        
        .result-code {
            font-family: 'SF Mono', monospace; font-size: 2rem; font-weight: 800;
            letter-spacing: 0.4em; text-align: center; margin: 0.8rem 0;
            color: var(--primary-light); text-shadow: 0 0 25px rgba(124,58,237,0.6);
            padding: 0.4rem; background: rgba(124,58,237,0.1); border-radius: 8px;
        }
        .result-session {
            font-family: 'SF Mono', monospace; background: rgba(2,6,23,0.9);
            padding: 0.85rem 1rem; border-radius: 10px; word-break: break-all;
            margin: 0.7rem 0; font-size: 0.9rem; border: 1px solid var(--border);
            position: relative;
        }
        .result-session::before {
            content: '\f023'; font-family: 'Font Awesome 6 Free'; font-weight: 900;
            position: absolute; left: 0.7rem; top: 50%; transform: translateY(-50%);
            opacity: 0.6; font-size: 0.8rem;
        }
        .result-session code { padding-left: 1.4rem; display: block; }
        
        .copy-feedback {
            display: inline-flex; align-items: center; gap: 0.35rem;
            margin-left: 0.7rem; font-size: 0.82rem; color: var(--success);
            opacity: 0; transition: opacity var(--transition);
        }
        .copy-feedback.show { opacity: 1; }

        /* Table */
        .table-wrap { overflow-x: auto; border-radius: 12px; border: var(--glass-border); }
        .sessions-table { width: 100%; border-collapse: collapse; min-width: 480px; }
        .sessions-table th, .sessions-table td {
            padding: 0.95rem 1.1rem; text-align: left;
            border-bottom: var(--glass-border); font-size: 0.9rem;
        }
        .sessions-table th {
            color: var(--text-muted); font-weight: 600; text-transform: uppercase;
            font-size: 0.76rem; letter-spacing: 0.04em; background: rgba(15,23,42,0.65);
        }
        .sessions-table tr:hover { background: var(--card-hover); }
        
        .badge {
            display: inline-flex; align-items: center; gap: 0.35rem;
            padding: 0.3rem 0.8rem; border-radius: 18px;
            font-size: 0.74rem; font-weight: 600; text-transform: uppercase;
        }
        .badge-success { background: rgba(16,185,129,0.15); color: var(--success); border: 1px solid rgba(16,185,129,0.3); }
        .badge-warning { background: rgba(245,158,11,0.15); color: var(--warning); border: 1px solid rgba(245,158,11,0.3); }
        .badge-danger { background: rgba(239,68,68,0.15); color: var(--danger); border: 1px solid rgba(239,68,68,0.3); }
        
        .action-btns { display: flex; gap: 0.4rem; }
        .action-btn {
            width: 34px; height: 34px; display: flex; align-items: center; justify-content: center;
            background: var(--card); border: var(--glass-border); border-radius: 9px;
            color: var(--text); cursor: pointer; transition: all var(--transition); font-size: 0.9rem;
        }
        .action-btn:hover { background: var(--primary); border-color: var(--primary); }
        .action-btn.delete:hover { background: var(--danger); border-color: var(--danger); }

        /* Settings */
        .settings-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px,1fr)); gap: 0.8rem; }
        .setting-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 0.9rem 1.1rem; background: rgba(15,23,42,0.6);
            border-radius: 12px; border: var(--glass-border); transition: all var(--transition);
        }
        .setting-item:hover { background: var(--card-hover); border-color: var(--border-glow); }
        .setting-info h4 { font-weight: 600; margin-bottom: 0.2rem; font-size: 0.95rem; }
        .setting-info p { font-size: 0.8rem; color: var(--text-dim); }
        
        .toggle { position: relative; width: 48px; height: 28px; flex-shrink: 0; }
        .toggle input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer; inset: 0;
            background: var(--card); border: var(--glass-border); border-radius: 30px;
            transition: all var(--transition);
        }
        .slider::before {
            position: absolute; content: ""; height: 22px; width: 22px;
            left: 3px; bottom: 2px; background: white; border-radius: 50%;
            transition: all var(--transition); box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        input:checked + .slider { background: linear-gradient(135deg, var(--primary), var(--secondary)); border-color: transparent; }
        input:checked + .slider::before { transform: translateX(20px); }

        /* Toast */
        .toast {
            position: fixed; bottom: 1.6rem; right: 1.6rem;
            padding: 0.95rem 1.4rem; background: var(--card);
            border-left: 4px solid var(--success); border-radius: 14px;
            box-shadow: var(--shadow-lg); display: flex; align-items: center; gap: 0.75rem;
            z-index: 1000; animation: toastIn 0.35s ease, toastOut 0.3s 3.5s forwards;
            max-width: 320px; font-size: 0.9rem; backdrop-filter: blur(12px);
            border: var(--glass-border);
        }
        .toast.error { border-left-color: var(--danger); }
        .toast.warning { border-left-color: var(--warning); }
        @keyframes toastIn { from{transform:translateX(120%);opacity:0} to{transform:translateX(0);opacity:1} }
        @keyframes toastOut { to{transform:translateX(30px);opacity:0} }

        /* Footer */
        footer {
            text-align: center; padding: 2rem 1.5rem 2.5rem;
            border-top: var(--glass-border); color: var(--text-muted);
            font-size: 0.86rem; background: rgba(2,6,23,0.8);
            backdrop-filter: var(--glass-blur);
        }
        footer a { color: var(--primary-light); text-decoration: none; font-weight: 500; }
        footer a:hover { color: var(--text-primary); }

        /* Loading Spinner */
        .spinner {
            display: inline-block; width: 18px; height: 18px;
            border: 2.5px solid rgba(255,255,255,0.3); border-radius: 50%;
            border-top-color: white; animation: spin 0.75s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Railway Badge */
        .railway-badge {
            position: fixed; bottom: 1.4rem; left: 50%; transform: translateX(-50%);
            z-index: 998; display: flex; align-items: center; gap: 0.45rem;
            padding: 0.35rem 0.9rem;
            background: linear-gradient(135deg, rgba(124,58,237,0.92), rgba(236,72,153,0.92));
            border: 1px solid rgba(255,255,255,0.15); border-radius: 18px;
            backdrop-filter: blur(10px); box-shadow: 0 6px 28px rgba(0,0,0,0.35);
            animation: floatBadge 3s ease-in-out infinite; pointer-events: none;
        }
        .railway-badge i { color: #ffd700; font-size: 0.85rem; }
        .railway-badge span { color: white; font-size: 0.72rem; font-weight: 600; letter-spacing: 0.2px; }
        @keyframes floatBadge { 0%,100%{transform:translateX(-50%) translateY(0)} 50%{transform:translateX(-50%) translateY(-3px)} }
        @media (max-width: 768px) { .railway-badge { display: none; } }

        /* Responsive */
        @media (max-width: 768px) {
            .top-header { padding: 0.85rem 1rem; }
            .header-logo { width: 44px; height: 44px; }
            .header-title { font-size: 0.95rem; }
            .nav-controls { top: 64px; padding: 0.45rem 0.55rem; }
            .nav-btn { padding: 0.5rem 0.7rem; font-size: 0.68rem; min-width: 64px; }
            main { padding: 0.8rem 0.7rem 2.5rem; }
            .card { padding: 1.3rem; }
            .dashboard-title { font-size: 1.65rem; }
            .result-code { font-size: 1.7rem; letter-spacing: 0.32em; }
            .btn { padding: 0.85rem 1.4rem; font-size: 0.92rem; }
        }

        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after { animation-duration: 0.01ms !important; transition-duration: 0.01ms !important; }
        }
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }
    </style>
</head>
<body>
    <!-- Background – IMAGE IKO WAZI KABISA (blur imeondoka) -->
    <div class="bg-premium" aria-hidden="true">
        <div class="bg-image"></div>
        <div class="bg-overlay"></div>
    </div>

    <!-- Loader – IMAGE SAFI (hakuna effects) -->
    <div id="loader" role="status" aria-live="polite">
        <div class="loader-logo"></div>
        <div class="loader-title">INSIDIOUS BOT</div>
        <div class="loader-progress"><div class="loader-progress-bar"></div></div>
        <div class="loader-status"><i class="fas fa-lock" aria-hidden="true"></i> Secure connection <i class="fas fa-shield-alt" aria-hidden="true"></i> v3.0</div>
    </div>

    <!-- Header -->
    <header class="top-header" role="banner">
        <div class="header-left">
            <div class="header-logo" onclick="showSection('dashboard')" role="button" tabindex="0" aria-label="Dashboard"></div>
            <div class="header-title">INSIDIOUS BOT <i class="fas fa-bolt" aria-hidden="true"></i> Premium Deployment</div>
        </div>
        <div class="status-badge">
            <div class="status-dot" aria-hidden="true"></div>
            <span id="botStatus">Checking...</span>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav-controls" role="navigation" aria-label="Main">
        <div class="nav-btn active" data-section="dashboard" role="button" tabindex="0">
            <i class="fas fa-home" aria-hidden="true"></i><span>Home</span>
        </div>
        <div class="nav-btn" data-section="pair" role="button" tabindex="0">
            <i class="fas fa-link" aria-hidden="true"></i><span>Pair</span>
        </div>
        <div class="nav-btn" data-section="deploy" role="button" tabindex="0">
            <i class="fas fa-rocket" aria-hidden="true"></i><span>Deploy</span>
        </div>
        <div class="nav-btn" data-section="sessions" role="button" tabindex="0">
            <i class="fas fa-list" aria-hidden="true"></i><span>Sessions</span>
        </div>
        <div class="nav-btn" data-section="settings" role="button" tabindex="0">
            <i class="fas fa-cog" aria-hidden="true"></i><span>Settings</span>
        </div>
    </nav>

    <!-- Main -->
    <main role="main">
        <!-- Dashboard -->
        <section id="dashboard" class="section active">
            <h1 class="dashboard-title"><i class="fas fa-shield-alt" aria-hidden="true"></i> INSIDIOUS BOT</h1>
            <p class="dashboard-subtitle">Premium WhatsApp bot deployment with instant pairing, session management and enterprise security.</p>
            
            <div class="quick-links">
                <a href="https://whatsapp.com/channel/0029Vb7fzu4EwEjmsD4Tzs1p" target="_blank" rel="noopener" class="quick-link">
                    <i class="fab fa-whatsapp" aria-hidden="true"></i> Channel
                </a>
                <a href="https://chat.whatsapp.com/J19JASXoaK0GVSoRvShr4Y" target="_blank" rel="noopener" class="quick-link">
                    <i class="fas fa-users" aria-hidden="true"></i> Support
                </a>
                <a href="https://wa.me/255787069580" target="_blank" rel="noopener" class="quick-link">
                    <i class="fas fa-user" aria-hidden="true"></i> Developer
                </a>
            </div>

            <div class="dash-grid">
                <div class="dash-card" onclick="showSection('pair')" role="button" tabindex="0">
                    <i class="fas fa-link" style="color:var(--primary-light)"></i>
                    <div class="label">Pair Number</div>
                    <div class="desc">Get pairing code</div>
                </div>
                <div class="dash-card" onclick="showSection('deploy')" role="button" tabindex="0">
                    <i class="fas fa-rocket" style="color:var(--success)"></i>
                    <div class="label">Deploy Bot</div>
                    <div class="desc">Launch instantly</div>
                </div>
                <div class="dash-card" onclick="showSection('sessions')" role="button" tabindex="0">
                    <i class="fas fa-list" style="color:var(--warning)"></i>
                    <div class="label">Sessions</div>
                    <div class="desc">Manage active</div>
                </div>
                <div class="dash-card" onclick="showSection('settings')" role="button" tabindex="0">
                    <i class="fas fa-cog" style="color:var(--secondary)"></i>
                    <div class="label">Settings</div>
                    <div class="desc">Configure bot</div>
                </div>
            </div>
        </section>

        <!-- Pair Section -->
        <section id="pair" class="section">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-mobile-alt" aria-hidden="true"></i> Pair Your Number</h3>
                    <button class="back-btn" onclick="showSection('dashboard')">
                        <i class="fas fa-arrow-left" aria-hidden="true"></i> Back
                    </button>
                </div>
                <form id="pairForm" autocomplete="off">
                    <div class="form-group">
                        <label for="pairNumber">WhatsApp Number</label>
                        <input type="tel" id="pairNumber" class="form-control" placeholder="2557XXXXXXXX" required pattern="[0-9]{10,15}" inputmode="numeric">
                        <small class="form-hint"><i class="fas fa-info-circle" aria-hidden="true"></i> Country code only, no + or spaces. Example: 255787069580</small>
                    </div>
                    <button type="submit" class="btn" id="pairBtn">
                        <i class="fas fa-key" aria-hidden="true"></i> Generate Pairing Code
                    </button>
                </form>
                <div class="result-box" id="pairResult" role="region" aria-live="polite">
                    <p style="color:var(--text-muted);margin-bottom:0.4rem"><i class="fas fa-info-circle" aria-hidden="true"></i> Your 8-digit pairing code:</p>
                    <div class="result-code" id="pairCode">----</div>
                    
                    <!-- Copy button for pairing code -->
                    <div style="display: flex; justify-content: center; margin: 0.5rem 0 1rem;">
                        <button class="btn btn-copy" id="copyPairCodeBtn" onclick="copyPairCode()" style="width: auto;">
                            <i class="fas fa-copy" aria-hidden="true"></i> Copy Code
                            <span class="copy-feedback" id="copyPairFeedback"><i class="fas fa-check" aria-hidden="true"></i> Copied</span>
                        </button>
                    </div>

                    <p style="font-size:0.86rem;color:var(--text-muted);margin:0.6rem 0 0.9rem">
                        <i class="fas fa-arrow-right" aria-hidden="true"></i> Enter in WhatsApp: <strong>Settings <i class="fas fa-chevron-right" aria-hidden="true"></i> Linked Devices <i class="fas fa-chevron-right" aria-hidden="true"></i> Link Device</strong>
                    </p>
                    <div id="sessionInfo" style="display:none;padding-top:0.9rem;border-top:1px dashed var(--border)">
                        <p style="color:var(--success);margin-bottom:0.4rem;font-weight:500"><i class="fas fa-check-circle" aria-hidden="true"></i> Pairing successful!</p>
                        <p style="margin:0.4rem 0;font-size:0.9rem">Your encrypted Session ID:</p>
                        <div class="result-session" id="sessionId"><code>Loading...</code></div>
                        <button class="btn btn-copy" id="copySessionBtn" onclick="copySession()">
                            <i class="fas fa-copy" aria-hidden="true"></i> Copy Session ID
                            <span class="copy-feedback" id="copyFeedback"><i class="fas fa-check" aria-hidden="true"></i> Copied</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Deploy Section -->
        <section id="deploy" class="section">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-rocket" aria-hidden="true"></i> Deploy Your Bot</h3>
                    <button class="back-btn" onclick="showSection('dashboard')">
                        <i class="fas fa-arrow-left" aria-hidden="true"></i> Back
                    </button>
                </div>
                <form id="deployForm" autocomplete="off">
                    <div class="form-group">
                        <label for="deploySession">Session ID</label>
                        <input type="text" id="deploySession" class="form-control" placeholder="Paste your session ID" required>
                        <small class="form-hint"><i class="fas fa-lock" aria-hidden="true"></i> Session ID received after successful pairing</small>
                    </div>
                    <div class="form-group">
                        <label for="deployNumber">Phone Number</label>
                        <input type="tel" id="deployNumber" class="form-control" placeholder="2557XXXXXXXX" required pattern="[0-9]{10,15}" inputmode="numeric">
                    </div>
                    <button type="submit" class="btn btn-success" id="deployBtn">
                        <i class="fas fa-play" aria-hidden="true"></i> Deploy Bot
                    </button>
                </form>
                <div class="result-box" id="deployResult" role="region" aria-live="polite">
                    <p id="deployMessage" style="color:var(--text-muted)">Deployment status will appear here...</p>
                </div>
            </div>
        </section>

        <!-- Sessions Section -->
        <section id="sessions" class="section">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-list" aria-hidden="true"></i> Your Sessions</h3>
                    <button class="back-btn" onclick="showSection('dashboard')">
                        <i class="fas fa-arrow-left" aria-hidden="true"></i> Back
                    </button>
                </div>
                <div class="table-wrap">
                    <table class="sessions-table" role="table" aria-label="Your sessions">
                        <thead>
                            <tr>
                                <th scope="col">Number</th>
                                <th scope="col">Session ID</th>
                                <th scope="col">Status</th>
                                <th scope="col">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="sessionsTableBody">
                            <tr><td colspan="4" style="text-align:center;padding:1.5rem;color:var(--text-muted)"><i class="fas fa-spinner fa-spin" aria-hidden="true"></i> Loading your sessions...</td></tr>
                        </tbody>
                    </table>
                </div>
                <button class="btn btn-outline" onclick="refreshSessions()" style="margin-top:1rem">
                    <i class="fas fa-sync" aria-hidden="true"></i> Refresh
                </button>
            </div>
        </section>

        <!-- Settings Section -->
        <section id="settings" class="section">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-cog" aria-hidden="true"></i> Bot Settings</h3>
                    <button class="back-btn" onclick="showSection('dashboard')">
                        <i class="fas fa-arrow-left" aria-hidden="true"></i> Back
                    </button>
                </div>
                <div class="settings-grid">
                    <div class="setting-item">
                        <div class="setting-info"><h4>Anti-ViewOnce</h4><p>Recover view-once media</p></div>
                        <label class="toggle"><input type="checkbox" id="setting-antiviewonce" checked><span class="slider"></span></label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info"><h4>Anti-Delete</h4><p>Recover deleted messages</p></div>
                        <label class="toggle"><input type="checkbox" id="setting-antidelete" checked><span class="slider"></span></label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info"><h4>Auto-Read</h4><p>Auto-read messages</p></div>
                        <label class="toggle"><input type="checkbox" id="setting-autoread" checked><span class="slider"></span></label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info"><h4>AI Chatbot</h4><p>Enable AI responses</p></div>
                        <label class="toggle"><input type="checkbox" id="setting-chatbot" checked><span class="slider"></span></label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info"><h4>Anti-Link</h4><p>Block links in groups</p></div>
                        <label class="toggle"><input type="checkbox" id="setting-antilink" checked><span class="slider"></span></label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info"><h4>Welcome Msg</h4><p>Send welcome/goodbye</p></div>
                        <label class="toggle"><input type="checkbox" id="setting-welcome" checked><span class="slider"></span></label>
                    </div>
                </div>
                <button class="btn" onclick="saveSettings()" style="margin-top:1.3rem">
                    <i class="fas fa-save" aria-hidden="true"></i> Save Settings
                </button>
            </div>
        </section>
    </main>

    <!-- Railway Badge -->
    <div class="railway-badge" aria-hidden="true">
        <i class="fas fa-bolt"></i><span>POWERED BY RAILWAY</span>
    </div>

    <!-- Footer -->
    <footer role="contentinfo">
        <p><strong>INSIDIOUS BOT v3.0</strong> | <time datetime="2025">2025</time> Stanley Assanaly<br>
        <a href="https://wa.me/255787069580" target="_blank" rel="noopener"><i class="fas fa-user" aria-hidden="true"></i> Contact</a> <i class="fas fa-circle" style="font-size:6px;margin:0 4px"></i>
        <a href="https://whatsapp.com/channel/0029Vb7fzu4EwEjmsD4Tzs1p" target="_blank" rel="noopener"><i class="fab fa-whatsapp" aria-hidden="true"></i> Channel</a></p>
        <p><i class="fas fa-shield-alt" aria-hidden="true"></i> End-to-end encrypted</p>
    </footer>

    <!-- Toast Container -->
    <div id="toastContainer" role="region" aria-live="assertive" aria-atomic="true"></div>
    <div id="ariaLive" class="sr-only" aria-live="polite" aria-atomic="true"></div>

    <script>
        // Disable right-click
        document.addEventListener('contextmenu', event => event.preventDefault());

        // ===== LOADER =====
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loader').classList.add('hidden');
            }, 2800);
            setTimeout(() => {
                initApp();
            }, 2900);
        });

        // ===== FETCH WITH TIMEOUT =====
        async function fetchWithTimeout(url, options = {}, timeout = 5000) {
            const controller = new AbortController();
            const id = setTimeout(() => controller.abort(), timeout);
            try {
                const response = await fetch(url, { ...options, signal: controller.signal });
                clearTimeout(id);
                return response;
            } catch (error) {
                clearTimeout(id);
                throw error;
            }
        }

        // ===== NAVIGATION =====
        function showSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelector(`.nav-btn[data-section="${id}"]`)?.classList.add('active');
            updateURL(id === 'dashboard' ? '' : id);
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        function updateURL(section) {
            history.replaceState(null, null, section ? `#${section}` : window.location.pathname);
        }

        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', () => showSection(btn.dataset.section));
            btn.addEventListener('keydown', e => { if(e.key==='Enter'||e.key===' ') { e.preventDefault(); showSection(btn.dataset.section); }});
        });

        window.addEventListener('load', () => {
            const hash = location.hash.replace('#','');
            if (hash && ['pair','deploy','sessions','settings'].includes(hash)) {
                setTimeout(() => showSection(hash), 3000);
            }
        });

        // ===== TOAST =====
        function showToast(msg, type='success') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.setAttribute('role', 'alert');
            const icon = type==='success'?'check-circle':type==='error'?'exclamation-circle':'exclamation-triangle';
            toast.innerHTML = `<i class="fas fa-${icon}" aria-hidden="true"></i><span>${msg}</span>`;
            container.appendChild(toast);
            setTimeout(() => { toast.style.opacity='0'; toast.style.transform='translateX(30px)'; setTimeout(()=>toast.remove(),300); }, 3800);
        }

        // ===== COPY =====
        async function copyToClipboard(text, btn) {
            try {
                await navigator.clipboard.writeText(text);
                if (btn) {
                    btn.classList.add('copied');
                    const fb = btn.querySelector('.copy-feedback');
                    if (fb) { fb.classList.add('show'); setTimeout(()=>fb.classList.remove('show'),1800); }
                    setTimeout(()=>btn.classList.remove('copied'),400);
                }
                return true;
            } catch {
                const ta = document.createElement('textarea');
                ta.value = text; ta.style.position='fixed'; ta.style.left='-9999px';
                document.body.appendChild(ta); ta.focus(); ta.select();
                try { document.execCommand('copy'); return true; } finally { document.body.removeChild(ta); }
            }
        }

        function copyPairCode() {
            const code = document.getElementById('pairCode').textContent.trim();
            const btn = document.getElementById('copyPairCodeBtn');
            if (code && code !== '----') {
                copyToClipboard(code, btn).then(() => showToast('Pairing code copied', 'success'));
            } else {
                showToast('No pairing code to copy', 'error');
            }
        }

        function copySession() {
            const sid = document.getElementById('sessionId').textContent.trim();
            const btn = document.getElementById('copySessionBtn');
            if (sid && sid!=='Loading...') {
                copyToClipboard(sid, btn).then(()=> showToast('Session ID copied', 'success'));
            }
        }

        // ===== LOCAL STORAGE FOR USER SESSIONS =====
        function getUserSessionIds() {
            const stored = localStorage.getItem('user_sessions');
            return stored ? JSON.parse(stored) : [];
        }

        function addUserSessionId(sessionId) {
            const sessions = getUserSessionIds();
            if (!sessions.includes(sessionId)) {
                sessions.push(sessionId);
                localStorage.setItem('user_sessions', JSON.stringify(sessions));
            }
        }

        function removeUserSessionId(sessionId) {
            let sessions = getUserSessionIds();
            sessions = sessions.filter(id => id !== sessionId);
            localStorage.setItem('user_sessions', JSON.stringify(sessions));
        }

        // ===== API: PAIR =====
        document.getElementById('pairForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const num = document.getElementById('pairNumber').value.trim();
            const btn = document.getElementById('pairBtn');
            const resultBox = document.getElementById('pairResult');
            const pairCode = document.getElementById('pairCode');
            const sessionInfo = document.getElementById('sessionInfo');
            const sessionIdEl = document.getElementById('sessionId');

            if (!/^[0-9]{10,15}$/.test(num)) {
                showToast('Invalid number. Use format: 2557XXXXXXXX', 'error');
                return;
            }

            btn.disabled = true;
            btn.innerHTML = '<span class="spinner"></span> Generating...';
            resultBox.classList.remove('show');
            sessionInfo.style.display = 'none';

            try {
                const res = await fetchWithTimeout(`/pair?num=${encodeURIComponent(num)}`, {}, 30000);
                const data = await res.json();

                if (data.success) {
                    if (data.code) {
                        pairCode.textContent = data.code;
                        resultBox.classList.add('show');
                        await copyToClipboard(data.code);
                        showToast('Pairing code generated and copied', 'success');
                    }
                    if (data.sessionId) {
                        sessionIdEl.innerHTML = `<code>${data.sessionId}</code>`;
                        sessionInfo.style.display = 'block';
                        addUserSessionId(data.sessionId);
                        showToast('Pairing successful! Session ID ready.', 'success');
                        document.getElementById('pairNumber').value = '';
                    }
                } else {
                    showToast(data.error || 'Pairing failed', 'error');
                }
            } catch (err) {
                console.error('Pair error:', err);
                if (err.name === 'AbortError') {
                    showToast('Request timed out. Please try again.', 'error');
                } else {
                    showToast('Connection error. Check internet and try again.', 'error');
                }
            } finally {
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-key" aria-hidden="true"></i> Generate Pairing Code';
            }
        });

        // ===== API: DEPLOY =====
        document.getElementById('deployForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const sessionId = document.getElementById('deploySession').value.trim();
            const number = document.getElementById('deployNumber').value.trim();
            const btn = document.getElementById('deployBtn');
            const resultBox = document.getElementById('deployResult');
            const msgEl = document.getElementById('deployMessage');

            if (!sessionId || !/^[0-9]{10,15}$/.test(number)) {
                showToast('Please provide a valid Session ID and phone number', 'error');
                return;
            }

            btn.disabled = true;
            btn.innerHTML = '<span class="spinner"></span> Deploying...';
            resultBox.classList.add('show');
            msgEl.innerHTML = '<i class="fas fa-spinner fa-spin" aria-hidden="true"></i> Initializing deployment...';

            try {
                const res = await fetchWithTimeout('/deploy', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ sessionId, number })
                }, 10000);
                const data = await res.json();

                if (data.success) {
                    msgEl.innerHTML = `<strong>Bot deployed successfully!</strong><br>
                        <span style="color:var(--text-muted);margin-top:0.4rem;display:block;line-height:1.6">
                        Session: <code style="background:rgba(15,23,42,0.8);padding:0.2rem 0.4rem;border-radius:4px;font-size:0.86rem">${sessionId}</code><br>
                        Number: <strong>${number}</strong><br>
                        <small style="display:block;margin-top:0.3rem;color:var(--success)">
                        <i class="fas fa-check" aria-hidden="true"></i> Bot is now active on WhatsApp servers.
                        </small></span>`;
                    showToast('Bot deployed successfully', 'success');
                    refreshSessions();
                    setTimeout(() => showSection('dashboard'), 1500);
                } else {
                    msgEl.textContent = data.error || 'Deployment failed';
                    showToast('Deployment failed: ' + (data.error || 'Unknown error'), 'error');
                }
            } catch (err) {
                console.error('Deploy error:', err);
                if (err.name === 'AbortError') {
                    msgEl.textContent = 'Request timed out. Please try again.';
                    showToast('Deployment timed out', 'error');
                } else {
                    msgEl.textContent = 'Network error. Please check connection.';
                    showToast('Deployment failed - connection error', 'error');
                }
            } finally {
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-play" aria-hidden="true"></i> Deploy Bot';
            }
        });

        // ===== API: SESSIONS (filtered by user) =====
        async function loadSessions() {
            const tbody = document.getElementById('sessionsTableBody');
            tbody.innerHTML = '<tr><td colspan="4" style="text-align:center;padding:1.5rem"><i class="fas fa-spinner fa-spin" aria-hidden="true"></i> Loading your sessions...</td></tr>';
            try {
                const res = await fetchWithTimeout('/sessions', {}, 5000);
                const data = await res.json();
                if (data.success && data.sessions?.length) {
                    const userSessions = getUserSessionIds();
                    const mySessions = data.sessions.filter(s => userSessions.includes(s.sessionId));
                    
                    if (mySessions.length === 0) {
                        tbody.innerHTML = '<tr><td colspan="4" style="text-align:center;padding:1.5rem;color:var(--text-muted)">You have no active sessions</td></tr>';
                        return;
                    }

                    tbody.innerHTML = '';
                    mySessions.forEach(s => {
                        const statusClass = s.status==='active'?'success':s.status==='pending'?'warning':'danger';
                        const statusIcon = s.status==='active'?'check-circle':s.status==='pending'?'clock':'times-circle';
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td><strong>${s.phoneNumber||'Unknown'}</strong></td>
                            <td><code style="font-size:0.83rem;background:rgba(15,23,42,0.7);padding:0.18rem 0.35rem;border-radius:4px">${s.sessionId}</code></td>
                            <td><span class="badge badge-${statusClass}"><i class="fas fa-${statusIcon}" aria-hidden="true"></i> ${s.status}</span></td>
                            <td><div class="action-btns">
                                <button class="action-btn" title="Refresh" onclick="refreshSessions()"><i class="fas fa-sync" aria-hidden="true"></i></button>
                                <button class="action-btn delete" title="Delete" onclick="deleteSession('${s.sessionId}')"><i class="fas fa-trash" aria-hidden="true"></i></button>
                            </div></td>`;
                        tbody.appendChild(row);
                    });
                } else {
                    tbody.innerHTML = '<tr><td colspan="4" style="text-align:center;padding:1.5rem;color:var(--text-muted)">You have no active sessions</td></tr>';
                }
            } catch (err) {
                console.error('Sessions error:', err);
                if (err.name === 'AbortError') {
                    tbody.innerHTML = '<tr><td colspan="4" style="text-align:center;padding:1.5rem;color:var(--danger)">Request timed out</td></tr>';
                } else {
                    tbody.innerHTML = '<tr><td colspan="4" style="text-align:center;padding:1.5rem;color:var(--danger)">Failed to load sessions</td></tr>';
                }
            }
        }

        function refreshSessions() { showToast('Refreshing...'); loadSessions(); }

        async function deleteSession(id) {
            if (!confirm(`Delete session ${id}? This cannot be undone.`)) return;
            try {
                const res = await fetchWithTimeout(`/sessions/${id}`, { method: 'DELETE' }, 5000);
                const data = await res.json();
                if (data.success) { 
                    removeUserSessionId(id);
                    showToast(`Session ${id} deleted`, 'warning'); 
                    loadSessions(); 
                } else {
                    showToast(data.error || 'Delete failed', 'error');
                }
            } catch (err) {
                console.error('Delete error:', err);
                if (err.name === 'AbortError') {
                    showToast('Request timed out', 'error');
                } else {
                    showToast('Network error during delete', 'error');
                }
            }
        }

        // ===== API: SETTINGS =====
        function saveSettings() {
            const settings = {
                antiviewonce: document.getElementById('setting-antiviewonce').checked,
                antidelete: document.getElementById('setting-antidelete').checked,
                autoread: document.getElementById('setting-autoread').checked,
                chatbot: document.getElementById('setting-chatbot').checked,
                antilink: document.getElementById('setting-antilink').checked,
                welcome: document.getElementById('setting-welcome').checked,
                timestamp: new Date().toISOString()
            };
            fetchWithTimeout('/settings', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(settings)
            }, 5000).then(r=>r.json()).then(d=>{
                if(d.success) {
                    showToast('Settings saved', 'success');
                    showSection('dashboard');
                } else {
                    showToast(d.error || 'Save failed', 'error');
                }
            }).catch(err => {
                if (err.name === 'AbortError') {
                    showToast('Request timed out', 'error');
                } else {
                    showToast('Network error - settings not saved', 'error');
                }
            });
        }

        // ===== HEALTH CHECK =====
        async function checkHealth() {
            try {
                const res = await fetchWithTimeout('/health', { cache: 'no-store' }, 5000);
                const data = await res.json();
                const statusEl = document.getElementById('botStatus');
                const dot = statusEl.previousElementSibling;
                if (data.status === 'healthy' || data.connected) {
                    statusEl.textContent = 'Online';
                    dot.style.background = 'var(--success)';
                } else {
                    statusEl.textContent = 'Offline';
                    dot.style.background = 'var(--danger)';
                }
            } catch (err) {
                console.error('Health check error:', err);
                document.getElementById('botStatus').textContent = 'Unknown';
                document.getElementById('botStatus').previousElementSibling.style.background = 'var(--warning)';
            }
        }

        // ===== INIT =====
        function initApp() {
            loadSessions();
            checkHealth();
            setInterval(checkHealth, 30000);
            
            document.querySelectorAll('.form-control').forEach(input => {
                input.addEventListener('focus', function() { this.parentElement.style.transform='scale(1.01)'; this.parentElement.style.transition='transform 0.2s'; });
                input.addEventListener('blur', function() { this.parentElement.style.transform='scale(1)'; });
            });

            console.log('%cINSIDIOUS BOT v3.0', 'color:#7c3aed;font-weight:bold;font-size:13px');
        }

        document.addEventListener('keydown', e => {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key.toLowerCase()) {
                    case 'p': e.preventDefault(); showSection('pair'); break;
                    case 'd': e.preventDefault(); showSection('deploy'); break;
                    case 's': e.preventDefault(); showSection('sessions'); break;
                    case ',': e.preventDefault(); showSection('settings'); break;
                    case 'h': e.preventDefault(); showSection('dashboard'); break;
                }
            }
            if (e.key === 'Escape') { const active = document.querySelector('.section.active'); if (active?.id !== 'dashboard') showSection('dashboard'); }
        });

        window.addEventListener('popstate', () => {
            const hash = location.hash.replace('#','');
            showSection(hash || 'dashboard');
        });
    </script>
</body>
</html>