<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#020617">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>INSIDIOUS BOT | Premium Deployment</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #ec4899;
            --dark: #0f172a;
            --darker: #020617;
            --card: rgba(30, 41, 59, 0.85);
            --card-hover: rgba(51, 65, 85, 0.9);
            --text: #f1f5f9;
            --text-muted: #94a3b8;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --border: rgba(148, 163, 184, 0.25);
            --glow: 0 0 25px rgba(99, 102, 241, 0.4);
            --glass-blur: blur(12px);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: url('https://o.uguu.se/bcWjyRkF.jpg') center/cover fixed no-repeat;
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, rgba(2,6,23,0.92) 0%, rgba(15,23,42,0.88) 50%, rgba(26,26,46,0.85) 100%);
            z-index: -2;
        }

        /* Premium Loading Screen */
        #premiumLoader {
            position: fixed;
            inset: 0;
            background: var(--darker);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s;
        }
        #premiumLoader.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }
        .loader-logo {
            width: 80px; height: 80px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            animation: pulseGlow 2s infinite alternate;
            box-shadow: var(--glow);
        }
        @keyframes pulseGlow {
            from { box-shadow: 0 0 15px rgba(99,102,241,0.6); }
            to { box-shadow: 0 0 35px rgba(236,72,153,0.9); }
        }
        .loader-text {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .loader-subtext {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
        }
        .loader-bar {
            width: 200px;
            height: 4px;
            background: var(--card);
            border-radius: 2px;
            overflow: hidden;
            position: relative;
        }
        .loader-progress {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 2px;
            animation: loadProgress 3s ease-in-out forwards;
        }
        @keyframes loadProgress {
            0% { width: 0%; }
            30% { width: 45%; }
            70% { width: 85%; }
            100% { width: 100%; }
        }

        /* Top Header with Rounded Logo + Sliding Text */
        .top-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.5rem;
            background: var(--card);
            backdrop-filter: var(--glass-blur);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .header-logo {
            width: 50px; height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            flex-shrink: 0;
            box-shadow: var(--glow);
            animation: floatLogo 3s ease-in-out infinite;
        }
        @keyframes floatLogo {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-4px); }
        }
        .header-text-container {
            flex: 1;
            overflow: hidden;
            position: relative;
        }
        .header-sliding-text {
            display: flex;
            animation: slideText 15s linear infinite;
            white-space: nowrap;
            font-weight: 600;
            font-size: 1.05rem;
        }
        @keyframes slideText {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        .header-sliding-text span {
            padding: 0 2rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Navigation Buttons - Small Size */
        .nav-controls {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: var(--glass-blur);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 72px;
            z-index: 99;
        }
        .nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            padding: 0.5rem 0.75rem;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.75rem;
            font-weight: 500;
            transition: all 0.25s;
            min-width: 65px;
            cursor: pointer;
        }
        .nav-btn i { font-size: 1.1rem; }
        .nav-btn:hover, .nav-btn.active {
            color: var(--text);
            background: var(--primary);
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        .nav-btn.active i { animation: bounce 0.5s; }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }

        /* Main Content */
        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        /* Section Management */
        .section {
            display: none;
            animation: fadeIn 0.4s ease;
        }
        .section.active { display: block; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Dashboard View */
        #dashboard-view {
            text-align: center;
            padding: 2rem 1rem;
        }
        .dashboard-title {
            font-size: 1.8rem;
            margin-bottom: 0.75rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .dashboard-subtitle {
            color: var(--text-muted);
            margin-bottom: 1.5rem;
            font-size: 1rem;
        }
        .quick-links {
            display: flex;
            justify-content: center;
            gap: 0.75rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }
        .quick-link {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.6rem 1.2rem;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text);
            text-decoration: none;
            font-size: 0.85rem;
            transition: all 0.25s;
        }
        .quick-link:hover {
            background: var(--card-hover);
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        /* Card Styles */
        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 1.5rem;
            backdrop-filter: var(--glass-blur);
            margin-bottom: 1.5rem;
        }
        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.25rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }
        .card-header h3 {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.2rem;
            font-weight: 600;
        }
        .card-header h3 i { color: var(--primary); }
        
        .back-btn {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.4rem 0.9rem;
            background: var(--card-hover);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .back-btn:hover {
            background: var(--primary);
            border-color: var(--primary);
        }

        /* Forms */
        .form-group { margin-bottom: 1.2rem; }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        .form-control {
            width: 100%;
            padding: 0.85rem 1rem;
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text);
            font-size: 1rem;
            transition: all 0.25s;
        }
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.25);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.85rem 1.5rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.25s;
            width: 100%;
        }
        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.45);
        }
        .btn:disabled {
            opacity: 0.65;
            cursor: not-allowed;
            transform: none;
        }
        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }
        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }
        .btn-success {
            background: linear-gradient(135deg, var(--success), #16a34a);
        }
        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #dc2626);
        }

        /* Result Box */
        .result-box {
            margin-top: 1.2rem;
            padding: 1.1rem;
            background: rgba(15, 23, 42, 0.7);
            border-radius: 12px;
            border-left: 4px solid var(--primary);
            display: none;
        }
        .result-box.show { 
            display: block; 
            animation: slideUp 0.3s ease;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .result-code {
            font-family: 'Courier New', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: 0.3em;
            text-align: center;
            margin: 0.75rem 0;
            color: var(--primary);
            text-shadow: 0 0 10px rgba(99,102,241,0.5);
        }
        .result-session {
            font-family: 'Courier New', monospace;
            background: rgba(2,6,23,0.8);
            padding: 0.8rem;
            border-radius: 10px;
            word-break: break-all;
            margin: 0.75rem 0;
            font-size: 0.9rem;
            border: 1px solid var(--border);
        }

        /* Sessions Table */
        .table-container {
            overflow-x: auto;
            border-radius: 12px;
            border: 1px solid var(--border);
        }
        .sessions-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 500px;
        }
        .sessions-table th,
        .sessions-table td {
            padding: 0.9rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
            font-size: 0.9rem;
        }
        .sessions-table th {
            color: var(--text-muted);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.8rem;
            background: rgba(15,23,42,0.5);
        }
        .sessions-table tr:last-child td { border-bottom: none; }
        .sessions-table tr:hover { background: var(--card-hover); }
        
        .badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        .badge-success { background: rgba(34,197,94,0.2); color: var(--success); }
        .badge-warning { background: rgba(245,158,11,0.2); color: var(--warning); }
        .badge-danger { background: rgba(239,68,68,0.2); color: var(--danger); }

        .action-btns { display: flex; gap: 0.4rem; }
        .action-btn {
            width: 34px; height: 34px;
            display: flex; align-items: center; justify-content: center;
            background: var(--card-hover);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
        }
        .action-btn:hover { background: var(--primary); border-color: var(--primary); }
        .action-btn.delete:hover { background: var(--danger); border-color: var(--danger); }

        /* Settings Grid */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 0.85rem;
        }
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.85rem 1rem;
            background: rgba(15,23,42,0.5);
            border-radius: 12px;
            border: 1px solid var(--border);
        }
        .setting-info h4 { font-weight: 500; margin-bottom: 0.2rem; font-size: 0.95rem; }
        .setting-info p { font-size: 0.8rem; color: var(--text-muted); }
        
        /* Toggle Switch */
        .toggle {
            position: relative;
            width: 48px; height: 26px;
        }
        .toggle input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute;
            cursor: pointer;
            inset: 0;
            background: var(--card-hover);
            border-radius: 26px;
            transition: 0.3s;
            border: 1px solid var(--border);
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 20px; width: 20px;
            left: 3px; bottom: 2px;
            background: white;
            border-radius: 50%;
            transition: 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        input:checked + .slider { background: var(--primary); border-color: var(--primary); }
        input:checked + .slider:before { transform: translateX(22px); }

        /* Status Indicator */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.4rem 1rem;
            background: var(--card);
            border-radius: 20px;
            font-size: 0.85rem;
            border: 1px solid var(--border);
        }
        .status-dot {
            width: 8px; height: 8px;
            border-radius: 50%;
            background: var(--success);
            animation: pulseDot 2s infinite;
        }
        @keyframes pulseDot {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.92); }
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 1.8rem 1.5rem 2.5rem;
            margin-top: 1rem;
            border-top: 1px solid var(--border);
            color: var(--text-muted);
            font-size: 0.85rem;
            background: rgba(2,6,23,0.7);
            backdrop-filter: var(--glass-blur);
        }
        footer a { 
            color: var(--primary); 
            text-decoration: none;
            font-weight: 500;
        }
        footer a:hover { text-decoration: underline; }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            padding: 0.9rem 1.4rem;
            background: var(--card);
            border-left: 4px solid var(--success);
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.4);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            z-index: 1000;
            animation: slideInRight 0.35s ease, fadeOut 0.3s 3.7s forwards;
            max-width: 320px;
            font-size: 0.9rem;
        }
        .toast.error { border-left-color: var(--danger); }
        .toast.warning { border-left-color: var(--warning); }
        @keyframes slideInRight {
            from { transform: translateX(120%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes fadeOut {
            to { opacity: 0; transform: translateX(20px); }
        }

        /* Loading Spinner */
        .loading {
            display: inline-block;
            width: 18px; height: 18px;
            border: 2.5px solid rgba(255,255,255,0.35);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.9s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Responsive */
        @media (max-width: 768px) {
            .top-header { padding: 0.85rem 1rem; }
            .header-logo { width: 44px; height: 44px; font-size: 1.2rem; }
            .header-sliding-text { font-size: 0.95rem; }
            .nav-controls { 
                top: 60px; 
                padding: 0.5rem;
                gap: 0.35rem;
            }
            .nav-btn { 
                padding: 0.45rem 0.6rem; 
                font-size: 0.7rem;
                min-width: 58px;
            }
            .nav-btn i { font-size: 1rem; }
            main { padding: 1rem 0.85rem; }
            .card { padding: 1.25rem; border-radius: 18px; }
            .dashboard-title { font-size: 1.5rem; }
            .result-code { font-size: 1.6rem; }
            .btn { padding: 0.8rem 1.3rem; font-size: 0.9rem; }
        }

        @media (max-width: 480px) {
            .header-sliding-text { animation-duration: 12s; }
            .nav-btn { min-width: 52px; padding: 0.4rem 0.5rem; }
            .setting-item { padding: 0.75rem 0.9rem; }
            .setting-info h4 { font-size: 0.9rem; }
            .setting-info p { font-size: 0.75rem; }
            footer { padding: 1.5rem 1rem 2rem; font-size: 0.8rem; }
        }

        /* Hide scrollbar for Chrome/Safari/Opera */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { 
            background: var(--primary); 
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary-dark); }
    </style>
</head>
<body>
    <!-- Premium Loading Screen -->
    <div id="premiumLoader">
        <div class="loader-logo"><i class="fas fa-key"></i></div>
        <div class="loader-text">INSIDIOUS BOT</div>
        <div class="loader-subtext">Loading premium deployment system...</div>
        <div class="loader-bar">
            <div class="loader-progress"></div>
        </div>
    </div>

    <!-- Top Header with Logo + Sliding Text -->
    <div class="top-header">
        <div class="header-logo">
            <i class="fas fa-shield-alt"></i>
        </div>
        <div class="header-text-container">
            <div class="header-sliding-text">
                <span>üîê INSIDIOUS: THE LAST KEY</span>
                <span>‚ö° Premium WhatsApp Bot Deployment</span>
                <span>üöÄ Instant Pairing & Session Management</span>
                <span>üõ°Ô∏è Secure ‚Ä¢ Fast ‚Ä¢ Reliable</span>
                <span>üîê INSIDIOUS: THE LAST KEY</span>
            </div>
        </div>
        <div class="status-badge">
            <div class="status-dot"></div>
            <span id="botStatus">Online</span>
        </div>
    </div>

    <!-- Navigation Control Buttons (Small Size) -->
    <div class="nav-controls">
        <div class="nav-btn active" data-section="dashboard">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </div>
        <div class="nav-btn" data-section="pair">
            <i class="fas fa-link"></i>
            <span>Pair</span>
        </div>
        <div class="nav-btn" data-section="deploy">
            <i class="fas fa-rocket"></i>
            <span>Deploy</span>
        </div>
        <div class="nav-btn" data-section="sessions">
            <i class="fas fa-list"></i>
            <span>Sessions</span>
        </div>
        <div class="nav-btn" data-section="settings">
            <i class="fas fa-cog"></i>
            <span>Settings</span>
        </div>
    </div>

    <!-- Main Content -->
    <main>
        <!-- Dashboard View (Default) -->
        <section id="dashboard-view" class="section active">
            <h2 class="dashboard-title">üîê INSIDIOUS BOT</h2>
            <p class="dashboard-subtitle">Premium WhatsApp bot deployment platform. Pair, deploy, and manage your bot sessions securely.</p>
            
            <div class="quick-links">
                <a href="https://whatsapp.com/channel/0029Vb7fzu4EwEjmsD4Tzs1p" target="_blank" class="quick-link">
                    <i class="fab fa-whatsapp"></i> Channel
                </a>
                <a href="https://chat.whatsapp.com/J19JASXoaK0GVSoRvShr4Y?mode=gi_t" target="_blank" class="quick-link">
                    <i class="fas fa-users"></i> Support
                </a>
                <a href="https://wa.me/255787069580" target="_blank" class="quick-link">
                    <i class="fas fa-user"></i> Developer
                </a>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 0.85rem; margin-top: 1rem;">
                <div class="card" style="text-align: center; padding: 1.2rem; cursor: pointer;" onclick="showSection('pair')">
                    <i class="fas fa-link" style="font-size: 1.8rem; color: var(--primary); margin-bottom: 0.5rem;"></i>
                    <div style="font-weight: 600;">Pair Number</div>
                    <div style="font-size: 0.8rem; color: var(--text-muted);">Get pairing code</div>
                </div>
                <div class="card" style="text-align: center; padding: 1.2rem; cursor: pointer;" onclick="showSection('deploy')">
                    <i class="fas fa-rocket" style="font-size: 1.8rem; color: var(--success); margin-bottom: 0.5rem;"></i>
                    <div style="font-weight: 600;">Deploy Bot</div>
                    <div style="font-size: 0.8rem; color: var(--text-muted);">Launch instantly</div>
                </div>
                <div class="card" style="text-align: center; padding: 1.2rem; cursor: pointer;" onclick="showSection('sessions')">
                    <i class="fas fa-list" style="font-size: 1.8rem; color: var(--warning); margin-bottom: 0.5rem;"></i>
                    <div style="font-weight: 600;">Sessions</div>
                    <div style="font-size: 0.8rem; color: var(--text-muted);">Manage active</div>
                </div>
                <div class="card" style="text-align: center; padding: 1.2rem; cursor: pointer;" onclick="showSection('settings')">
                    <i class="fas fa-cog" style="font-size: 1.8rem; color: var(--secondary); margin-bottom: 0.5rem;"></i>
                    <div style="font-weight: 600;">Settings</div>
                    <div style="font-size: 0.8rem; color: var(--text-muted);">Configure bot</div>
                </div>
            </div>
        </section>

        <!-- Pair Section -->
        <section id="pair-section" class="section">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-mobile-alt"></i> Pair Your Number</h3>
                    <button class="back-btn" onclick="showSection('dashboard')">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                </div>
                <form id="pairForm">
                    <div class="form-group">
                        <label for="pairNumber">WhatsApp Number</label>
                        <input type="tel" id="pairNumber" class="form-control" placeholder="2557XXXXXXXX" required pattern="[0-9]{10,15}">
                        <small style="color: var(--text-muted); display: block; margin-top: 0.35rem;">Include country code, no + or spaces</small>
                    </div>
                    <button type="submit" class="btn" id="pairBtn">
                        <i class="fas fa-key"></i> Generate Pairing Code
                    </button>
                </form>
                <div class="result-box" id="pairResult">
                    <p style="color: var(--text-muted); margin-bottom: 0.4rem;">Your 8-digit pairing code:</p>
                    <div class="result-code" id="pairCode">----</div>
                    <p style="font-size: 0.85rem; color: var(--text-muted); margin: 0.6rem 0;">
                        <i class="fas fa-info-circle"></i> Enter this code in WhatsApp: 
                        <strong>Settings ‚Üí Linked Devices ‚Üí Link Device</strong>
                    </p>
                    <div id="sessionInfo" style="margin-top: 1rem; display: none; padding-top: 0.8rem; border-top: 1px dashed var(--border);">
                        <p style="color: var(--success); margin-bottom: 0.4rem;">
                            <i class="fas fa-check-circle"></i> Pairing successful!
                        </p>
                        <p style="margin: 0.4rem 0; font-size: 0.9rem;">Your Session ID:</p>
                        <div class="result-session" id="sessionId">Loading...</div>
                        <button class="btn btn-outline" onclick="copySession()" style="margin-top: 0.6rem; padding: 0.65rem 1.2rem; font-size: 0.9rem;">
                            <i class="fas fa-copy"></i> Copy Session ID
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Deploy Section -->
        <section id="deploy-section" class="section">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-rocket"></i> Deploy Your Bot</h3>
                    <button class="back-btn" onclick="showSection('dashboard')">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                </div>
                <form id="deployForm">
                    <div class="form-group">
                        <label for="deploySession">Session ID</label>
                        <input type="text" id="deploySession" class="form-control" placeholder="Paste your session ID" required>
                    </div>
                    <div class="form-group">
                        <label for="deployNumber">Phone Number</label>
                        <input type="tel" id="deployNumber" class="form-control" placeholder="2557XXXXXXXX" required pattern="[0-9]{10,15}">
                    </div>
                    <button type="submit" class="btn btn-success" id="deployBtn">
                        <i class="fas fa-play"></i> Deploy Bot
                    </button>
                </form>
                <div class="result-box" id="deployResult">
                    <p id="deployMessage">Deployment status will appear here after submission...</p>
                </div>
            </div>
        </section>

        <!-- Sessions Section -->
        <section id="sessions-section" class="section">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-list"></i> Active Sessions</h3>
                    <button class="back-btn" onclick="showSection('dashboard')">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                </div>
                <div class="table-container">
                    <table class="sessions-table">
                        <thead>
                            <tr>
                                <th>Number</th>
                                <th>Session ID</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="sessionsTableBody">
                            <tr>
                                <td colspan="4" style="text-align: center; color: var(--text-muted); padding: 1.5rem;">
                                    <i class="fas fa-spinner fa-spin" style="margin-right: 0.5rem;"></i>
                                    Loading sessions from server...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <button class="btn btn-outline" onclick="refreshSessions()" style="margin-top: 1rem;">
                    <i class="fas fa-sync"></i> Refresh Sessions
                </button>
            </div>
        </section>

        <!-- Settings Section -->
        <section id="settings-section" class="section">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-cog"></i> Bot Settings</h3>
                    <button class="back-btn" onclick="showSection('dashboard')">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                </div>
                <div class="settings-grid">
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>Anti-ViewOnce</h4>
                            <p>Recover deleted view-once media</p>
                        </div>
                        <label class="toggle">
                            <input type="checkbox" id="setting-antiviewonce" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>Anti-Delete</h4>
                            <p>Recover deleted messages</p>
                        </div>
                        <label class="toggle">
                            <input type="checkbox" id="setting-antidelete" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>Auto-Read</h4>
                            <p>Automatically read messages</p>
                        </div>
                        <label class="toggle">
                            <input type="checkbox" id="setting-autoread" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>AI Chatbot</h4>
                            <p>Enable AI responses</p>
                        </div>
                        <label class="toggle">
                            <input type="checkbox" id="setting-chatbot" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>Anti-Link</h4>
                            <p>Block links in groups</p>
                        </div>
                        <label class="toggle">
                            <input type="checkbox" id="setting-antilink" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>Welcome Messages</h4>
                            <p>Send welcome/goodbye</p>
                        </div>
                        <label class="toggle">
                            <input type="checkbox" id="setting-welcome" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <button class="btn" onclick="saveSettings()" style="margin-top: 1.3rem;">
                    <i class="fas fa-save"></i> Save Settings to Server
                </button>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <p>
            <strong>INSIDIOUS BOT v2.2</strong> | ¬© 2025 Stanley Assanaly<br>
            <a href="https://wa.me/255787069580" target="_blank">Contact Developer</a> ‚Ä¢ 
            <a href="https://whatsapp.com/channel/0029Vb7fzu4EwEjmsD4Tzs1p" target="_blank">Channel</a> ‚Ä¢ 
            <a href="https://chat.whatsapp.com/J19JASXoaK0GVSoRvShr4Y?mode=gi_t" target="_blank">Support Group</a>
        </p>
        <p style="margin-top: 0.6rem; font-size: 0.8rem; opacity: 0.85;">
            <i class="fas fa-shield-alt"></i> End-to-end encrypted ‚Ä¢ No data stored on client
        </p>
    </footer>

    <!-- Toast Container -->
    <div id="toastContainer"></div>

    <script>
        // ========== PREMIUM LOADER ==========
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('premiumLoader').classList.add('hidden');
                // Initialize after loader hides
                initApp();
            }, 3000); // 3 seconds premium load
        });

        // ========== SECTION NAVIGATION ==========
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            
            // Show dashboard by default if no specific section
            if (sectionName === 'dashboard') {
                document.getElementById('dashboard-view').classList.add('active');
                document.querySelector('.nav-btn[data-section="dashboard"]').classList.add('active');
                return;
            }
            
            // Show requested section
            const sectionMap = {
                'pair': 'pair-section',
                'deploy': 'deploy-section', 
                'sessions': 'sessions-section',
                'settings': 'settings-section'
            };
            
            if (sectionMap[sectionName]) {
                document.getElementById(sectionMap[sectionName]).classList.add('active');
                document.querySelector(`.nav-btn[data-section="${sectionName}"]`)?.classList.add('active');
            }
            
            // Scroll to top smoothly
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Nav button click handlers
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const section = btn.dataset.section;
                showSection(section);
            });
        });

        // ========== TOAST NOTIFICATIONS ==========
        function showToast(message, type = 'success') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            const icon = type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'exclamation-triangle';
            toast.innerHTML = `<i class="fas fa-${icon}"></i><span>${message}</span>`;
            container.appendChild(toast);
            
            // Auto remove after animation
            setTimeout(() => toast.remove(), 4000);
        }

        // ========== COPY TO CLIPBOARD ==========
        function copySession() {
            const sessionId = document.getElementById('sessionId').textContent.trim();
            if (sessionId && sessionId !== 'Loading...') {
                navigator.clipboard.writeText(sessionId).then(() => {
                    showToast('‚úÖ Session ID copied to clipboard!');
                }).catch(() => {
                    // Fallback for older browsers
                    const textarea = document.createElement('textarea');
                    textarea.value = sessionId;
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textarea);
                    showToast('‚úÖ Session ID copied!');
                });
            }
        }

        // ========== API INTEGRATION (PURE - NO SIMULATION) ==========
        
        // Pair Form Submission
        document.getElementById('pairForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const number = document.getElementById('pairNumber').value.trim();
            const btn = document.getElementById('pairBtn');
            const resultBox = document.getElementById('pairResult');
            const pairCode = document.getElementById('pairCode');
            const sessionInfo = document.getElementById('sessionInfo');
            const sessionIdEl = document.getElementById('sessionId');

            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span> Generating...';
            resultBox.classList.remove('show');
            sessionInfo.style.display = 'none';

            try {
                // REAL API CALL - Replace with your backend endpoint
                const response = await fetch(`/api/pair?num=${encodeURIComponent(number)}`, {
                    method: 'GET',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                const data = await response.json();

                if (data.success) {
                    pairCode.textContent = data.code || '----';
                    resultBox.classList.add('show');
                    
                    if (data.sessionId) {
                        sessionIdEl.textContent = data.sessionId;
                        sessionInfo.style.display = 'block';
                        showToast('‚úÖ Pairing successful! Copy your Session ID.');
                    } else {
                        showToast('üì± Enter the code in WhatsApp to complete pairing.');
                    }
                } else {
                    showToast(data.error || '‚ùå Pairing failed', 'error');
                }
            } catch (error) {
                console.error('Pair API error:', error);
                showToast('üåê Connection error. Check your internet and try again.', 'error');
            } finally {
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-key"></i> Generate Pairing Code';
            }
        });

        // Deploy Form Submission
        document.getElementById('deployForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const sessionId = document.getElementById('deploySession').value.trim();
            const number = document.getElementById('deployNumber').value.trim();
            const btn = document.getElementById('deployBtn');
            const resultBox = document.getElementById('deployResult');
            const messageEl = document.getElementById('deployMessage');

            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span> Deploying...';
            resultBox.classList.add('show');
            messageEl.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Initializing secure deployment...';

            try {
                // REAL API CALL - Replace with your backend endpoint
                const response = await fetch('/api/deploy', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ sessionId, number })
                });
                
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                const data = await response.json();

                if (data.success) {
                    messageEl.innerHTML = `‚úÖ <strong>Bot deployed successfully!</strong><br>
                        <span style="color: var(--text-muted); margin-top: 0.4rem; display: block;">
                        Session: <code style="background: rgba(15,23,42,0.7); padding: 0.2rem 0.4rem; border-radius: 4px;">${data.sessionId || sessionId}</code><br>
                        Number: ${number}<br>
                        <small>Bot is now active and connected to WhatsApp servers.</small>
                        </span>`;
                    showToast('üöÄ Bot deployed successfully!');
                    refreshSessions(); // Refresh sessions list
                } else {
                    messageEl.textContent = `‚ùå ${data.error || 'Deployment failed'}`;
                    showToast(data.error || '‚ùå Deployment failed', 'error');
                }
            } catch (error) {
                console.error('Deploy API error:', error);
                messageEl.textContent = '‚ùå Network error. Please check connection and try again.';
                showToast('üåê Deployment failed - connection error', 'error');
            } finally {
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-play"></i> Deploy Bot';
            }
        });

        // Load Sessions from API
        async function loadSessions() {
            const tbody = document.getElementById('sessionsTableBody');
            tbody.innerHTML = '<tr><td colspan="4" style="text-align: center; padding: 1.5rem;"><i class="fas fa-spinner fa-spin"></i> Loading...</td></tr>';

            try {
                // REAL API CALL - Replace with your backend endpoint
                const response = await fetch('/api/sessions', {
                    method: 'GET',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                const data = await response.json();
                
                if (data.success && Array.isArray(data.sessions) && data.sessions.length > 0) {
                    tbody.innerHTML = '';
                    data.sessions.forEach(session => {
                        const row = document.createElement('tr');
                        const statusClass = session.status === 'active' ? 'success' : session.status === 'pending' ? 'warning' : 'danger';
                        row.innerHTML = `
                            <td><strong>${session.number}</strong></td>
                            <td><code style="font-size: 0.85rem;">${session.sessionId}</code></td>
                            <td><span class="badge badge-${statusClass}">${session.status}</span></td>
                            <td>
                                <div class="action-btns">
                                    <button class="action-btn" title="Refresh" onclick="refreshSession('${session.number}')">
                                        <i class="fas fa-sync"></i>
                                    </button>
                                    <button class="action-btn delete" title="Delete Session" onclick="deleteSession('${session.number}')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        `;
                        tbody.appendChild(row);
                    });
                } else {
                    tbody.innerHTML = '<tr><td colspan="4" style="text-align: center; color: var(--text-muted); padding: 1.5rem;">No active sessions found</td></tr>';
                }
            } catch (error) {
                console.error('Sessions API error:', error);
                tbody.innerHTML = '<tr><td colspan="4" style="text-align: center; color: var(--danger); padding: 1.5rem;">‚ö†Ô∏è Failed to load sessions from server</td></tr>';
            }
        }

        function refreshSessions() {
            showToast('üîÑ Refreshing sessions...');
            loadSessions();
        }

        function refreshSession(number) {
            showToast(`üîÑ Refreshing ${number}...`);
            // Add real API call: fetch(`/api/session/${number}/refresh`)
        }

        function deleteSession(number) {
            if (confirm(`‚ö†Ô∏è Delete session for ${number}?\n\nThis action cannot be undone.`)) {
                // REAL API CALL
                fetch(`/api/session/${number}`, { method: 'DELETE' })
                    .then(res => res.json())
                    .then(data => {
                        if (data.success) {
                            showToast(`üóëÔ∏è Session deleted: ${number}`, 'warning');
                            loadSessions();
                        } else {
                            showToast(data.error || '‚ùå Delete failed', 'error');
                        }
                    })
                    .catch(() => showToast('üåê Network error during delete', 'error'));
            }
        }

        // Save Settings to Server
        function saveSettings() {
            const settings = {
                antiviewonce: document.getElementById('setting-antiviewonce').checked,
                antidelete: document.getElementById('setting-antidelete').checked,
                autoread: document.getElementById('setting-autoread').checked,
                chatbot: document.getElementById('setting-chatbot').checked,
                antilink: document.getElementById('setting-antilink').checked,
                welcome: document.getElementById('setting-welcome').checked,
                timestamp: new Date().toISOString()
            };
            
            // REAL API CALL
            fetch('/api/settings', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(settings)
            })
            .then(res => res.json())
            .then(data => {
                if (data.success) {
                    showToast('‚öôÔ∏è Settings saved to server successfully!');
                } else {
                    showToast(data.error || '‚ùå Failed to save settings', 'error');
                }
            })
            .catch(error => {
                console.error('Settings API error:', error);
                showToast('üåê Network error - settings not saved', 'error');
            });
        }

        // Check Bot Health Status
        async function checkBotStatus() {
            try {
                const response = await fetch('/api/health', { cache: 'no-store' });
                const data = await response.json();
                const statusEl = document.getElementById('botStatus');
                const dot = statusEl.previousElementSibling;
                
                if (data.connected) {
                    statusEl.textContent = 'Online';
                    dot.style.background = 'var(--success)';
                } else {
                    statusEl.textContent = 'Offline';
                    dot.style.background = 'var(--danger)';
                }
            } catch {
                document.getElementById('botStatus').textContent = 'Unknown';
                document.getElementById('botStatus').previousElementSibling.style.background = 'var(--warning)';
            }
        }

        // ========== APP INITIALIZATION ==========
        function initApp() {
            // Load initial data
            loadSessions();
            checkBotStatus();
            
            // Periodic status checks
            setInterval(checkBotStatus, 30000);
            
            // Form input enhancements
            document.querySelectorAll('.form-control').forEach(input => {
                input.addEventListener('focus', function() {
                    this.parentElement.style.transform = 'scale(1.01)';
                    this.parentElement.style.transition = 'transform 0.2s';
                });
                input.addEventListener('blur', function() {
                    this.parentElement.style.transform = 'scale(1)';
                });
            });
            
            // Prevent zoom on input focus for mobile
            document.querySelectorAll('input, select, textarea').forEach(el => {
                el.addEventListener('focus', () => {
                    if (window.innerWidth < 768) {
                        document.body.style.overflow = 'hidden';
                    }
                });
                el.addEventListener('blur', () => {
                    document.body.style.overflow = '';
                });
            });
        }

        // Handle browser back button for section navigation
        window.addEventListener('popstate', () => {
            showSection('dashboard');
        });

        // Service Worker Registration (for PWA support on mobile)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // navigator.serviceWorker.register('/sw.js').catch(err => console.log('SW registration failed:', err));
            });
        }
    </script>
</body>
</html>

